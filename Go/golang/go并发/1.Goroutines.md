> [Goroutines · Go语言圣经 (studygolang.com)](https://books.studygolang.com/gopl-zh/ch8/ch8-01.html)

在Go语言中，**每一个并发的执行单元叫作一个goroutine**，也叫**协程**。

当一个程序启动时，其主函数即在一个单独的goroutine中运行，我们叫它main goroutine。

新的goroutine会用go语句来创建。
```go
f()    // call f(); wait for it to return
go f() // create a new goroutine that calls f(); don't wait
```

**主函数返回时，所有的goroutine都会被直接打断，程序退出。** 除了从主函数退出或者直接终止程序之外，没有其它的编程方法能够让一个goroutine来打断另一个的执行，但是之后可以看到一种方式来实现这个目的，通过goroutine之间的通信来让一个goroutine请求其它的goroutine，并让被请求的goroutine自行结束执行。
## Go语言中的进程、线程和协程
在Go语言中，有进程、线程和协程这三个概念，它们在并发编程中具有不同的特点和用途。

1. 进程（Process）： **进程是操作系统中的一个执行单位，它拥有独立的地址空间和系统资源。** 每个进程都运行在自己的内存空间中，相互之间无法直接读取彼此的数据。进程之间的通信需要使用特殊的机制，例如管道、共享内存等。在Go语言中，可以使用`os/exec`包来创建和管理外部进程。
    
2. 线程（Thread）： **线程是操作系统调度的最小执行单位，一个进程可以包含多个线程。** 线程共享进程的地址空间和系统资源，可以直接读写进程的数据。线程之间的通信相对容易，可以通过共享内存或消息传递来实现。在Go语言中，可以使用`goroutine`来实现轻量级的线程，具备并发执行的能力。
    
3. 协程（Goroutine）： **协程是Go语言特有的并发执行单元，它是一种轻量级的线程。** 与传统线程相比，协程的创建、销毁和切换消耗更少的资源。协程由Go运行时系统进行调度，可以在单个线程上并发执行，实现高效的并发编程。不同于线程的是，协程之间的切换是由程序控制而不是由操作系统控制。在Go语言中，可以使用关键字`go`来创建和启动协程。
    

总结：

- 进程是操作系统中的一个执行单位，拥有独立的地址空间和系统资源；
- 线程是操作系统调度的最小执行单位，多个线程可以共享进程的资源；
- 协程是Go语言特有的并发执行单位，比线程更轻量级，由Go运行时系统进行调度。

在Go语言中，协程是实现并发编程的首选方式，通过goroutine和通道的组合，可以更简洁、高效地编写并发程序。