[【MySQL】MySQL表设计的经验（建议收藏）-阿里云开发者社区](https://developer.aliyun.com/article/1393401)
## 索引设计
- **  字段的选择性（Selectivity）**
    
    - **定义与重要性**：
        - 字段的选择性是指列中不同值的数量与表中总行数的比例。选择性越高，索引的效果通常越好。例如，在一个包含员工信息的表中，如果 “员工编号” 列的每个值都是唯一的，其选择性为 1（即 100%），这是非常适合创建索引的情况。因为在查询时，通过这个索引可以快速定位到特定的员工记录。
    - **计算与评估示例**：
        - 假设一个 “产品类别” 表中有 1000 个产品记录，而 “类别名称” 列只有 5 个不同的值（如 “电子设备”、“家居用品” 等），那么该列的选择性为 5/1000 = 0.005。这种情况下，对该列创建索引的效果可能不如选择性高的列。一般来说，选择性低于某个阈值（如 0.1）时，需要谨慎考虑是否创建索引，因为可能导致索引占用过多空间而查询性能提升有限。
- **数据类型的合适性**
    
    - **整数类型**：
        - 对于整数类型的字段，如`INT`、`BIGINT`等，是非常适合作为索引字段的。因为整数比较运算速度快，而且占用空间相对较小。例如，在订单表中，“订单编号” 通常是整数类型，对其创建索引可以高效地支持根据订单编号进行查询，如查询特定订单的详细信息。
    - **字符类型**：
        - 对于字符类型（如`VARCHAR`、`CHAR`），要考虑字段长度。如果字符字段长度过长，不仅会增加索引的存储空间，还可能影响查询性能。例如，在一个用户表中，“用户简介” 字段可能包含较长的文本内容，对这样的字段创建索引可能不是一个好的选择。而对于 “用户名” 这种长度相对较短且用于频繁查询的字符字段，比较适合创建索引。
    - **日期和时间类型**：
        - 日期和时间类型（如`DATE`、`DATETIME`）在需要按照时间范围进行查询时是很好的索引候选字段。例如，在销售记录表中，“销售日期” 字段创建索引后，可以方便地查询某一时间段内的销售情况，如查询上个月的销售总额。
- **字段的稳定性（Immutability）**
    
    - **含义与原因**：
        - 索引字段的值最好是相对稳定的。因为索引的结构是基于字段值构建的，如果字段值频繁修改，索引也需要频繁更新，这会带来额外的性能开销。例如，在一个库存管理系统中，“库存数量” 字段可能会随着商品的进出库而频繁变化，对这个字段创建索引可能会导致大量的索引更新操作。
    - **反例说明**：
        - 假设一个在线文档编辑系统，“文档内容” 字段是频繁修改的，每次修改都可能涉及大量文本的变化。如果对这个字段创建索引，每当文档内容更新时，索引也需要更新，这会消耗大量的系统资源，并且可能降低系统的整体性能。
- **避免过多或不必要的索引**
    
    - **索引数量的影响**：
        - 创建过多的索引会增加数据库的存储成本，因为每个索引都需要占用一定的磁盘空间。同时，在插入、更新和删除操作时，数据库需要同时更新相关的索引，这会导致这些操作的性能下降。例如，一个包含 10 个列的表，如果对每个列都创建索引，不仅会占用大量的磁盘空间，而且在执行数据修改操作时，系统可能会花费大量时间来维护这些索引。
    - **判断必要性**：
        - 需要根据实际的业务查询需求来判断索引的必要性。如果一个列很少在查询条件中出现，或者可以通过其他已有的索引来间接满足查询要求，那么就可能不需要为这个列单独创建索引。例如，在一个员工表中，“员工家庭住址” 列如果很少用于查询，就可以不创建索引。
- **索引列的顺序（针对复合索引）**
    
    - **原则与重要性**：
        - 在创建复合索引（由多个列组成的索引）时，列的顺序非常重要。应该将选择性高、经常用于查询条件的列放在前面。这样在查询时可以更快地定位到相关记录。例如，在一个订单表中有 “用户 ID”、“订单日期” 和 “订单金额” 三个列创建复合索引，假设查询经常以 “用户 ID” 和 “订单日期” 为条件，那么复合索引应该按照 “用户 ID”、“订单日期” 的顺序创建，这样可以提高查询效率。
    - **示例说明**：
        - 假设存在一个学生选课表，有 “学生 ID”、“课程 ID” 和 “选课时间” 三个列。如果经常查询某一学生在某一时间段内所选的课程，那么创建复合索引（“学生 ID”，“选课时间”，“课程 ID”）是比较合适的顺序。因为在查询时，首先根据 “学生 ID” 进行筛选，可以快速缩小范围，然后再结合 “选课时间” 进一步定位，最后 “课程 ID” 可以用于更精确的匹配。